setwd('/home/jay/classes/R.class')
library(ggplot2)
pf <- read.csv('pseudo_facebook.tsv', sep='\t')
library(dplyr)
age_groups <- group_by(pf, age)
pf.fc_by_age <- summarise(age_groups,
friend_count_mean = mean(friend_count),
friend_count_median = median(friend_count),
n = n())
pf.fc_by_age <- arrange(pf.fc_by_age, age)
ggplot(aes(x = age, y = friend_count), data = pf) +
xlim(13, 90) +
geom_point(alpha = 1/20, position = position_jitter(h = 0), color = 'orange') +
coord_trans(y="sqrt") +
geom_line(stat = 'summary', fun.y = mean) +
geom_line(stat = 'summary', fun.y = quantile, probs=.1, linetype=2, color='blue') +
geom_line(stat = 'summary', fun.y = quantile, probs=.9, linetype=2, color='red')
ggplot(aes(x = age, y = friend_count), data = pf) +
xlim(13, 90) +
geom_point(alpha = 1/20, position = position_jitter(h = 0), color = 'orange') +
coord_trans(y="sqrt") +
geom_line(stat = 'summary', fun.y = mean) +
geom_line(stat = 'summary', fun.y = quantile, probs=.1, linetype=2, color='blue') +
geom_line(stat = 'summary', fun.y = quantile, probs=.9, linetype=2, color='red') +
geom_line(stat = 'summary', fun.y = quantile, probs=.5, color='blue')
library(ggplot2)
pf <- read.csv('pseudo_facebook.tsv', sep='\t')
library(dplyr)
age_groups <- group_by(pf, age)
pf.fc_by_age <- summarise(age_groups,
friend_count_mean = mean(friend_count),
friend_count_median = median(friend_count),
n = n())
pf.fc_by_age <- arrange(pf.fc_by_age, age)
head(pf.fc_by_age)
ggplot(aes(x = age, y = friend_count_mean), data = pf.fc_by_age) +
#coord_trans(y="sqrt") +
geom_line() +
xlim(13, 90)
ggplot(aes(x = age, y = friend_count), data = pf) +
xlim(13, 90) +
geom_point(alpha = 1/20, position = position_jitter(h = 0), color = 'orange') +
coord_trans(y="sqrt") +
geom_line(stat = 'summary', fun.y = mean) +
geom_line(stat = 'summary', fun.y = quantile, probs=.1, linetype=2, color='blue') +
geom_line(stat = 'summary', fun.y = quantile, probs=.9, linetype=2, color='red') +
geom_line(stat = 'summary', fun.y = quantile, probs=.5, color='blue')
cor.test(pf$age, pf$friend_count, "pearson")
cor.test(pf$age, pf$friend_count, alternative="less", method=pearson")
cor.test(pf$age, pf$friend_count, alternative="less", method="pearson")
cor.test(pf$age, pf$friend_count, alternative="less", method="pearson")
cor.test(pf$age, pf$friend_count, alternative="greater", method="pearson")
cor.test(pf$age, pf$friend_count, alternative="less", method="pearson")
with(pf                 , cor.test(age, friend_count))
with(subset(pf, age <= 70), cor.test(age, friend_count))
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/20, color = 'orange') +
#coord_trans(y="sqrt") +
geom_line(stat = 'summary', fun.y = mean) +
geom_line(stat = 'summary', fun.y = quantile, probs=.1, linetype=2, color='blue') +
geom_line(stat = 'summary', fun.y = quantile, probs=.9, linetype=2, color='red') +
geom_line(stat = 'summary', fun.y = quantile, probs=.5, color='blue')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/20, color = 'orange') +
coord_trans(y="log10")# +
#geom_line(stat = 'summary', fun.y = mean) +
#geom_line(stat = 'summary', fun.y = quantile, probs=.1, linetype=2, color='blue') +
#geom_line(stat = 'summary', fun.y = quantile, probs=.9, linetype=2, color='red') +
#geom_line(stat = 'summary', fun.y = quantile, probs=.5, color='blue')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1, color = 'orange') +
coord_trans(y="log10")# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1, color = 'orange') +
coord_trans(y="log10", x="log10")# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1, color = 'orange')#
summmary(pf)
str(pf)
summary(pf)
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
geom_point(alpha = 1, color = 'orange')# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
ylim(0, 1000) +
geom_point(alpha = 1, color = 'orange')# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
ylim(0, 1000) +
geom_point(alpha = 1/10, color = 'orange')# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
ylim(0, 1000) +
geom_point(alpha = 1/10, color = 'orange') +
coord_trans(y="log10", x="log10")# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
ylim(0, 1000) +
geom_point(alpha = 1/10, color = 'orange') +
coord_trans(y="sqrt", x="sqrt")# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, 1000) +
ylim(0, 1000) +
geom_point(alpha = 1/10, color = 'orange')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, quantile(pf$www_likes_received), 0.95) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_point(alpha = 1/10, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, quantile(pf$www_likes_received), 0.95) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_point(alpha = 1/10, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, quantile(pf$www_likes_received), 0.95) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_point(alpha = 1, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, quantile(pf$www_likes_received, 0.95) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_point(alpha = 1, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
xlim(0, quantile(pf$www_likes_received, 0.95)) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_point(alpha = 1, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95)) +
ylim(0, quantile(pf$likes_received, 0.95))# +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1, color = 'orange')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange')
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95)) +
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95))
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95))
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95)) +
ylim(0, quantile(pf$likes_received, 0.95))
ggplot(aes(x = www_likes_received, y = likes_received), data = pf) +
geom_point(alpha = 1/5, color = 'orange') +
xlim(0, quantile(pf$www_likes_received, 0.95)) +
ylim(0, quantile(pf$likes_received, 0.95)) +
geom_smooth(method = "lm", color="red")
with(pf), cor.test(www_likes_received, likes_received))
with(pf, cor.test(www_likes_received, likes_received))
install.packages('alr3')
library(alr3)
data(Mitchell)
?Mitchell
names(Mitchell)
head(Mitchell)
ggplot(aes(x=Temp, y=Month), data=Mitchell)
ggplot(aes(x=Temp, y=Month), data=Mitchell) +
geom_point()
summary(Mitchell)
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_point()
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_line()
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_point()
with(Mitchell, cor.test(Month, Temp))
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_point() +
scale_x_discrete(limits=(0, max(Mitchell$Month)), breaks=c(1,12,max(Mitchell$Month)))
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_point() +
scale_x_discrete(breaks=seq(0,max(Mitchell$Month),12), lim=c(0,max(Mitchell$Month)))
max(Mitchell$Month)
ggplot(aes(x=Month, y=Temp), data=Mitchell) +
geom_point() +
scale_x_discrete(breaks=seq(0,max(Mitchell$Month),12))
summary(pf)
pf$age_with_months <- pf$dob_age + pf$dob_month / 12
str(pf)
pf$age_with_months <- pf$dob_age + pf$dob_month / 12
pf$age_with_months <- pf$dob_age + (pf$dob_month / 12)
pf$age_with_months <- pf$dob_age + pf$dob_month
pf$age_with_months <- (pf$dob_age + (pf$dob_month / 12))
str(pf)
pf$age_with_months <- pf$age + (pf$dob_month / 12)
str(pf)
pf$age_with_months <- pf$age + (1 - (pf$dob_month / 12))
str(pf)
age_with_months_groups <- group_by(pf, age_with_months)
pf.fc_by_age_months <- summarise(age_groups_with_months_groups,
friend_count_mean = mean(friend_count),
friend_count_median = median(friend_count),
n = n())
pf.fc_by_age_months <- summarise(age_with_months_groups,
friend_count_mean = mean(friend_count),
friend_count_median = median(friend_count),
n = n())
pf.fc_by_age_months <- arrange(pf.fc_by_age_months, age_with_months)
head(pf.fc_by_age_months)
ggplot(aes(x = age_with_months, y = friend_count_mean), data = pf.fc_by_age_months) +
#coord_trans(y="sqrt") +
geom_line() +
xlim(13, 71)
summary(pf.fc_by_age_months)
quantile
ggplot(aes(x = age_with_months, y = friend_count_mean), data = pf.fc_by_age_months) +
#coord_trans(y="sqrt") +
geom_line() +
xlim(13, 71) +
ylim(0, quantile(pf.fc_by_age_months$friend_count_mean, 0.95))
ggplot(aes(x = age, y = friend_count_mean),
data = subset(pf.fc_by_age, age < 71) +
geom_line()
ggplot(aes(x = age, y = friend_count_mean),
data = subset(pf.fc_by_age, age < 71)) +
geom_line()
ggplot(aes(x = age, y = friend_count_mean),
data = subset(pf.fc_by_age, age < 71)) +
geom_line()
ggplot(aes(x = age_with_months, y = friend_count_mean),
data = subset(pf.fc_by_age_months, age_with_months < 71)) +
geom_line()
ggplot(aes(x = round(age / 5) * 5, y = friend_count),
data = subset(pf, age < 71)) +
geom_line(stat = "summary", fun.y = mean)
p1 <- ggplot(aes(x = age, y = friend_count_mean),
data = subset(pf.fc_by_age, age < 71)) +
geom_line()
p2 <- ggplot(aes(x = age_with_months, y = friend_count_mean),
data = subset(pf.fc_by_age_months, age_with_months < 71)) +
geom_line()
p3 <- ggplot(aes(x = round(age / 5) * 5, y = friend_count),
data = subset(pf, age < 71)) +
geom_line(stat = "summary", fun.y = mean)
library(gridExtra)
grid.arrange(p2, p1, p3, ncol = 1)
p1 <- ggplot(aes(x = age, y = friend_count_mean),
data = subset(pf.fc_by_age, age < 71)) +
geom_line() +
geom_smooth()
p2 <- ggplot(aes(x = age_with_months, y = friend_count_mean),
data = subset(pf.fc_by_age_months, age_with_months < 71)) +
geom_line() +
geom_smooth()
p3 <- ggplot(aes(x = round(age / 5) * 5, y = friend_count),
data = subset(pf, age < 71)) +
geom_line(stat = "summary", fun.y = mean)
library(gridExtra)
grid.arrange(p2, p1, p3, ncol = 1)
summary(diamonds)
library(diamonds)
ggplot(aes(x=x, y=price), data = diamonds) +
geom_point()
cor.test(diamonds$price, diamonds$x)
cor.test(diamonds$price, diamonds$x)
cor.test(diamonds$price, diamonds$y)
cor.test(diamonds$price, diamonds$z)
cor.test(diamonds$price, diamonds$x)
cor.test(diamonds$price, diamonds$y)
cor.test(diamonds$price, diamonds$z)
ggplot(aes(x=depth, y=price), data = diamonds) +
geom_point()
ggplot(aes(x=depth, y=price), data = diamonds) +
geom_point(alpha=1/100) +
scale_x_continuous(breaks=seq(0, max(diamonds$depth), 2))
ggplot(aes(x=depth, y=price), data = diamonds) +
geom_point()
ggplot(aes(x=depth, y=price), data = diamonds) +
geom_point(alpha=1/100) +
scale_x_continuous(breaks=seq(0, max(diamonds$depth), 2))
cor.test(diamonds$depth, diamonds$price)
ggplot(aes(x=carat, y=price), data = diamonds) +
geom_point()
diamonds$volume <- diamonds$x * diamonds$y * diamonds$z
summary(diamonds)
ggplot(aes(x=volume, y=price), data = diamonds) +
geom_point()
library(dplyr)
count(diamonds$volume == 0)
diamonds$volume <- diamonds$x * diamonds$y * diamonds$z
count(diamonds$volume == 0)
detach("package:plyr", unload=TRUE)
count(diamonds$volume == 0)
cor.test(diamonds$price, diamonds$volume)
good_diamonds <- subset(volume != 0 & volume <= 800)
good_diamonds <- subset(volume != 0 & volume <= 800)
good_diamonds <- subset(diamonds, volume != 0 & volume <= 800)
cor.test(good_diamonds$price, good_diamonds$volume)
ggplot(aes(x=volume, y=price), data = good_diamonds) +
geom_point(alpha=1/10)
ggplot(aes(x=volume, y=price), data = good_diamonds) +
geom_point(alpha=1/20)
ggplot(aes(x=volume, y=price), data = good_diamonds) +
geom_point(alpha=1/20) +
stat_smooth(method = "lm", formula = y ~ x, size = 1)
clarity_groups <- group_by(diamonds, clarity)
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
median_price=mdeian(price),
min_price=min(price),
max_price=max(price),
n=n())
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
median_price=median(price),
min_price=min(price),
max_price=max(price),
n=n())
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
#median_price=median(price),
#min_price=min(price),
#max_price=max(price),
n=n())
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
median_price=median(price),
#min_price=min(price),
#max_price=max(price),
n=n())
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
median_price=median(as.numeric(price)),
#min_price=min(price),
#max_price=max(price),
n=n())
diamondsByClarity <- summarize(clarity_groups,
mean_price=mean(price),
median_price=median(as.numeric(price)),
min_price=min(price),
max_price=max(price),
n=n())
diamonds_by_clarity <- group_by(diamonds, clarity)
diamonds_mp_by_clarity <- summarise(diamonds_by_clarity, mean_price = mean(price))
diamonds_by_color <- group_by(diamonds, color)
diamonds_mp_by_color <- summarise(diamonds_by_color, mean_price = mean(price))
library(gridExtra)
str(diamonds_by_clarity)
ggplot(aes(x=clarity, y=mean_price), diamonds_by_clarity) +
geom_bar()
ggplot(aes(x=clarity, y=mean_price), data=diamonds_by_clarity) +
geom_bar()
str(diamonds_by_clarity)
diamonds_by_clarity <- group_by(diamonds, clarity)
ggplot(aes(x=clarity, y=mean_price), data=diamonds_mp_by_clarity) +
geom_bar()
ggplot(aes(x=clarity, y=mean_price), data=diamonds_mp_by_clarity) +
geom_bar(stat = "identity")
ggplot(aes(x=color, y=mean_price), data=diamonds_mp_by_color) +
geom_bar(stat = "identity")
p1 <- ggplot(aes(x=clarity, y=mean_price), data=diamonds_mp_by_clarity) +
geom_bar(stat = "identity")
p2 <- ggplot(aes(x=color, y=mean_price), data=diamonds_mp_by_color) +
geom_bar(stat = "identity")
grid.arrange(p1, p2, ncol=1)
setwd('/home/jay/classes/R.class')
library(tidyr)
setwd('/home/jay/classes/R.class')
library(tidyr)
df <- read.csv('Gapminder.labor.to.population.csv', header=T, check.names=F)
names(df)
newdf = gather(df, 'year', 'ratio', 2:ncol(df))
names(newdf)
head(newdf)
qplot(x=ratio,
data=newdf,
xlab="Percent Labor Force",
binwidth=1) +
facet_wrap(~year)
us_labor <- subset(newdf, Country == 'United States')
head(us_labor)
ggplot(aes(x=year, y=ratio), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=log10(ratio), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=log10(ratio), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=log10(ratio), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=log10(ratio)), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=log10(ratio)), data=us_labor) +
geom_bar(stat = "identity")
ggplot(aes(x=year, y=ratio), data=us_labor) +
geom_bar(stat = "identity")
cor.test(us_labor$year, us_labor$ratio)
cor.test(as.numeric(us_labor$year), us_labor$ratio)
ggplot(aes(x=year, y=ratio), data=us_labor) +
geom_line(stat = "identity")
ggplot(aes(x=year, y=ratio), data=us_labor) +
geom_line()
broadband <- read.csv('Gapminder.broadband.subscribers', header=T, check.names=F)
broadband <- read.csv('Gapminder.broadband.subscribers.csv', header=T, check.names=F)
broadband <- gather(broadband, 'year', 'count', 2:ncol(broadband))
us_broadband <- subset(broadband, Country == 'United States')
summary(us_broadband)
summary(us_labor)
str(us_labor)
str(us_broadband)
merged <- merge(us_labor, us_broadband, by="year")
summary(merged)
merged <- merge(newdf, broadband, by=c("Country", "year"))
summary(merged)
summary(subset(merged, country == "United States"))
summary(subset(merged, Country == "United States"))
head(subset(merged, Country == "United States"))
tail(subset(merged, Country == "United States"))
head(subset(merged, Country == "United States", year > 1997))
head(subset(merged, Country == "United States" & year > 1997))
head(subset(merged, Country == "United States" & as.numeric(year) > 1997))
head(subset(merged, Country == "United States" & year > as.factor(1997)))
us_data <- subset(merged, Country == 'United States')
head(us_data)
us_data <- na.omit(us_data)
head(us_data)
newdf = gather(df, 'year', 'labor', 2:ncol(df))
merged <- merge(newdf, broadband, by=c("Country", "year"))
us_data <- subset(merged, Country == 'United States')
us_data <- na.omit(us_data)
head(us_data)
ggplot(aes(x=labor, y=count), data=us_data) +
geom_point()
ggplot(aes(x=labor, y=log10(count)), data=us_data) +
geom_point()
ggplot(aes(x=log10(count), y=labor, data=us_data) +
geom_point()
ggplot(aes(x=log10(count), y=labor, data=us_data)) +
geom_point()
ggplot(aes(x=log10(count), y=labor, data=us_data)) +
geom_point()
ggplot(aes(x=count, y=labor, data=us_data)) +
geom_point()
head(us_data)
us_data <- subset(merged, Country == 'United States')
us_data <- na.omit(us_data)
ggplot(aes(x=count, y=labor, data=us_data)) +
geom_point()
df <- read.csv('Gapminder.labor.to.population.csv', header=T, check.names=F)
broadband <- read.csv('Gapminder.broadband.subscribers.csv', header=T, check.names=F)
newdf = gather(df, 'year', 'labor', 2:ncol(df))
broadband <- gather(broadband, 'year', 'count', 2:ncol(broadband))
merged <- merge(newdf, broadband, by=c("Country", "year"))
us_data <- subset(merged, Country == 'United States')
us_data <- na.omit(us_data)
head(us_data)
ggplot(aes(x=count, y=labor), data=us_data) +
geom_point()
ggplot(aes(x=log10(count), y=labor), data=us_data) +
geom_point()
newdf = gather(df, 'year', 'labor', 2:ncol(df))
broadband <- gather(broadband, 'year', 'subscribers', 2:ncol(broadband))
merged <- merge(newdf, broadband, by=c("Country", "year"))
us_data <- subset(merged, Country == 'United States')
us_data <- na.omit(us_data)
head(us_data)
df <- read.csv('Gapminder.labor.to.population.csv', header=T, check.names=F)
broadband <- read.csv('Gapminder.broadband.subscribers.csv', header=T, check.names=F)
newdf = gather(df, 'year', 'labor', 2:ncol(df))
broadband <- gather(broadband, 'year', 'subscribers', 2:ncol(broadband))
merged <- merge(newdf, broadband, by=c("Country", "year"))
us_data <- subset(merged, Country == 'United States')
us_data <- na.omit(us_data)
head(us_data)
ggplot(aes(x=log10(subscribers), y=labor), data=us_data) +
geom_point()
p1 <- ggplot(aes(x=subscribers, y=labor), data=us_data) +
geom_point()
p2 <- ggplot(aes(x=log10(subscribers), y=labor), data=us_data) +
geom_point()
grid.arrange(p1, p2, ncol=1)
cor.test(as.numeric(us_data$labor), us_data$subscribers)
ggplot(aes(x=subscribers, y=labor), data=us_data) +
geom_point() +
stat_smooth(method = "lm", formula = y ~ x, size = 1)
p1 <- ggplot(aes(x=subscribers, y=labor), data=us_data) +
geom_point()
p2 <- ggplot(aes(x=log10(subscribers), y=labor), data=us_data) +
geom_point()
grid.arrange(p1, p2, ncol=1) # 1st plot
cor.test(as.numeric(us_data$labor), us_data$subscribers)
